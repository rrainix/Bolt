cmake_minimum_required(VERSION 3.23)
project(BoltGame LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

file(GLOB_RECURSE GAME_SOURCES
  "${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp"
  "${CMAKE_CURRENT_SOURCE_DIR}/src/*.c"
)

add_executable(BoltGame ${GAME_SOURCES})

target_link_libraries(BoltGame PRIVATE BoltCore)

set_property(TARGET BoltGame PROPERTY
  VS_DEBUGGER_WORKING_DIRECTORY "$<TARGET_FILE_DIR:BoltGame>"
)


foreach(cfg Debug Release RelWithDebInfo MinSizeRel)
  set_target_properties(BoltGame PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY_${cfg} "${CMAKE_SOURCE_DIR}/Binaries/${cfg}"
  )
endforeach()


add_custom_command(TARGET BoltGame POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E make_directory
    "$<TARGET_FILE_DIR:BoltGame>/Assets"
  COMMAND ${CMAKE_COMMAND} -E copy_directory
    "${CMAKE_CURRENT_SOURCE_DIR}/Assets"
    "$<TARGET_FILE_DIR:BoltGame>/Assets"
  COMMENT "Copying Bolt Game assets to output folder"
)
